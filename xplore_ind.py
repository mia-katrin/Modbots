import time

from sideChannelPythonside import SideChannelPythonside
from individual import Individual
from evaluate import get_env, evaluate, close_env, set_env_variables

import argparse

force_headless = False

# Add arguments
parser = argparse.ArgumentParser(description='Explore some boys')
parser.add_argument(
    'config_file',
    type=str,
    help='The config file to configure this evolution'
)

with open(parser.parse_args().config_file, "r") as file:
    for line in file:
        exec(line)
        print(line)

print("We start")
start = time.time()
ind = Individual("2.867406296924524,0.23372716364356638,-0.8553068967715385,0.9480565996281707,0.3965333546966532|[|[|M0,180,2.974551037182809,0.9518776350008662,-0.6096609002585269,0.7774612176883051,0.3476656554310079|[|[|M0,90,1.3291669970221673,0.44477098635913526,0.5358120725286613,-0.9481685337309236,0.5977239407183774|M2,90,1.2852870811827821,0.008626661882420783,-0.9450181180263739,-0.8429937918303296,0.6416478861541339|]|M1,0,0.1,0.0,0.3119974588606408,0.0,0.02090195161641062|]|M2,180,0.28307678791919766,0.0,0.0,0.0,0.0|]|M1,90,0.44463085681247916,0.19333942631140966,0.8548895424413983,-1.36875682244921,0.6214842054151697|M1,0,0.1,0.0,0.0,0.0,0.0|]|M2,270,2.3130680609545156,0.8056282749700384,0.9369387330577281,-0.814560598314676,0.8297992672177132|[|M0,0,2.037565169729769,0.9168238129393873,0.43574299899655233,-0.9654617152978848,0.11470824369560106|M0,0,2.1382384859024577,0.5869752124467582,-0.2941443877174954,0.1078831729574945,-0.20955388209121795|M1,0,2.778343784419961,0.3266542647360309,0.8844545517256392,-0.7424413895172699,-0.04970638650200754|]|M2,90,0.6094384823498917,0.1866654597616597,0.7069680087930503,0.018988194017308224,0.2621846167442661|")
set_env_variables(PATH, seed=SEED, headless=HEADLESS or True if force_headless else False)
print("Starting:", time.time()-start)

start = time.time()
fitness = evaluate(ind)
print("Evaluating:", time.time()-start)
print(f"We got fitness {fitness}")

start = time.time()
close_env()
print("Closing:", time.time()-start)
